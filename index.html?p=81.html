<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">

	<title>Domain handler on error handler</title>
	<meta name="description" content="Express.js discussion forums" />
	<meta name="keywords" content="express, express.js, book, forum, forums, nodejs, node.js" />
<link rel="stylesheet" type="text/css" href="wp-content/themes/ewad/style.css"></style>
<script type="text/javascript" src="wp-content/themes/ewad/jquery-1.10.2.min.js"></script>
<script type="text/javascript" src="wp-content/themes/ewad/main.js"></script>
<link rel="alternate" type="application/rss+xml" title="Express.js Book - Express Web Application Development &raquo; Domain handler on error handler Comments Feed" href="forums/topic/domain-handler-on-error-handler/feed/index.html" />
<link rel='stylesheet' id='bbp-default-css'  href='wp-content/plugins/bbpress/templates/default/css/bbpress.css%3Fver=2.5.4-5380.css' type='text/css' media='screen' />
<script type='text/javascript' src='http://expressjs-book.com/wp-includes/js/jquery/jquery.js?ver=1.11.0'></script>
<script type='text/javascript' src='http://expressjs-book.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.2.1'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="xmlrpc.php%3Frsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://expressjs-book.com/wp-includes/wlwmanifest.xml" /> 
<link rel='next' title='Confirmed Errata' href='index.html%3Fp=27.html' />

<link rel='shortlink' href='index.html%3Fp=81.html' />
	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>

<!-- All in One SEO Pack 2.2.2 by Michael Torbert of Semper Fi Web Design[144,178] -->
<meta name="description"  content="On page 202, here is the sample code to handle error on domain. However, I don't quite understand the whole example. I looked at sample at" />

<link rel="canonical" href="index.html%3Fp=81.html" />
<!-- /all in one seo pack -->
</head>
<body>
<div id="toolbar">
	<ul>
		<li><a href="index.html">HOME</a></li>
		<li id="discussion"><a href="forums.html"class="active">DISCUSSION</a></li>
		<li id="join-us"></li>
				<li id="signup"><a href="wp-login.php%3Faction=register.html">Register</a></li>
		<li id="login"><a href="wp-login.php%3Fredirect_to=http%253A%252F%252Fexpressjs-book.com%252Fforums%252Ftopic%252Fdomain-handler-on-error-handler%252F.html">Log In</a></li>
			</ul>
</div>

<div id="wrapper">

	
					<div id="forum">
					
<div id="bbpress-forums">

	<div class="bbp-breadcrumb"><p><a href="index.html" class="bbp-breadcrumb-home">Home</a> <span class="bbp-breadcrumb-sep">&rsaquo;</span> <a href="forums.html" class="bbp-breadcrumb-root">Forums</a> <span class="bbp-breadcrumb-sep">&rsaquo;</span> <a href="index.html%3Fp=20.html" class="bbp-breadcrumb-forum">Chapter 8: Express in Production</a> <span class="bbp-breadcrumb-sep">&rsaquo;</span> <span class="bbp-breadcrumb-current">Domain handler on error handler</span></p></div>
	
	
		
		<div class="bbp-template-notice info"><p class="bbp-topic-description">This topic contains 1 reply, has 2 voices, and was last updated by <a href="forums/users/captain/index.html" title="View Yaapa&#039;s profile" class="bbp-author-avatar" rel="nofollow"><img alt='' src='http://0.gravatar.com/avatar/ac96905ca7b25f0577e4bcc9c344afb6?s=14&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D14&amp;r=G' class='avatar avatar-14 photo' height='14' width='14' /></a>&nbsp;<a href="forums/users/captain/index.html" title="View Yaapa&#039;s profile" class="bbp-author-name" rel="nofollow">Yaapa</a> <a href="index.html%3Fp=81.html#post-87" title="Reply To: Domain handler on error handler">1 year, 8 months ago</a>.</p></div>
		
		
			

<div class="bbp-pagination">
	<div class="bbp-pagination-count">

		Viewing 2 posts - 1 through 2 (of 2 total)
	</div>

	<div class="bbp-pagination-links">

		
	</div>
</div>


			

<ul id="topic-81-replies" class="forums bbp-replies">

	<li class="bbp-header">

		<div class="bbp-reply-author">Author</div><!-- .bbp-reply-author -->

		<div class="bbp-reply-content">

			
				Posts
				
				
			
		</div><!-- .bbp-reply-content -->

	</li><!-- .bbp-header -->

	<li class="bbp-body">

		
			
				
<div id="post-81" class="bbp-reply-header">

	<div class="bbp-meta">

		<span class="bbp-reply-post-date">August 24, 2013 at 9:01 pm</span>

		
		<a href="index.html%3Fp=81.html#post-81" class="bbp-reply-permalink">#81</a>

		
		<span class="bbp-admin-links"></span>
		
	</div><!-- .bbp-meta -->

</div><!-- #post-81 -->

<div class="post-81 topic type-topic status-publish hentry odd bbp-parent-forum-20 bbp-parent-topic-81 bbp-reply-position-1 user-id-12 topic-author">

	<div class="bbp-reply-author">

		
		<a href="forums/users/gdbtek/index.html" title="View gdbtek&#039;s profile" class="bbp-author-avatar" rel="nofollow"><img alt='' src='http://1.gravatar.com/avatar/fbf343a20266518095e84ad6b612de72?s=80&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&amp;r=G' class='avatar avatar-80 photo' height='80' width='80' /></a><br /><a href="forums/users/gdbtek/index.html" title="View gdbtek&#039;s profile" class="bbp-author-name" rel="nofollow">gdbtek</a><br /><div class="bbp-author-role">Participant</div>
		
		
	</div><!-- .bbp-reply-author -->

	<div class="bbp-reply-content">

		
		<p>On page 202, here is the sample code to handle error on domain. However, I don&#8217;t quite understand the whole example. I looked at sample at <a href="http://nodejs.org/api/domain.html" rel="nofollow">http://nodejs.org/api/domain.html</a> but this do not use express. Can you provide full sample for following sample?</p>
<pre><code>// Domain error handler
d.on(&#039;error&#039;, function(err) {
// Stop accepting new connections
server.close();
// Perform last-minute cleanup
res.send(500);
// Let the master know the worker has disconnected
cluster.worker.disconnect();
// Terminate the process in 5 seconds
setTimeout(function() {
// Exit with a failure code
process.process.exit(1);
}, 5000);
});</code></pre>

		
	</div><!-- .bbp-reply-content -->

</div><!-- .reply -->

			
				
<div id="post-87" class="bbp-reply-header">

	<div class="bbp-meta">

		<span class="bbp-reply-post-date">August 26, 2013 at 8:49 am</span>

		
		<a href="index.html%3Fp=81.html#post-87" class="bbp-reply-permalink">#87</a>

		
		<span class="bbp-admin-links"></span>
		
	</div><!-- .bbp-meta -->

</div><!-- #post-87 -->

<div class="post-87 reply type-reply status-publish hentry even bbp-parent-forum-20 bbp-parent-topic-81 bbp-reply-position-2 user-id-2">

	<div class="bbp-reply-author">

		
		<a href="forums/users/captain/index.html" title="View Yaapa&#039;s profile" class="bbp-author-avatar" rel="nofollow"><img alt='' src='http://0.gravatar.com/avatar/ac96905ca7b25f0577e4bcc9c344afb6?s=80&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D80&amp;r=G' class='avatar avatar-80 photo' height='80' width='80' /></a><br /><a href="forums/users/captain/index.html" title="View Yaapa&#039;s profile" class="bbp-author-name" rel="nofollow">Yaapa</a><br /><div class="bbp-author-role">Keymaster</div>
		
		
	</div><!-- .bbp-reply-author -->

	<div class="bbp-reply-content">

		
		<p>The example on Page no. 201 is a complete example using an Express app.</p>

		
	</div><!-- .bbp-reply-content -->

</div><!-- .reply -->

			
		
	</li><!-- .bbp-body -->

	<li class="bbp-footer">

		<div class="bbp-reply-author">Author</div>

		<div class="bbp-reply-content">

			
				Posts
			
		</div><!-- .bbp-reply-content -->

	</li><!-- .bbp-footer -->

</ul><!-- #topic-81-replies -->


			

<div class="bbp-pagination">
	<div class="bbp-pagination-count">

		Viewing 2 posts - 1 through 2 (of 2 total)
	</div>

	<div class="bbp-pagination-links">

		
	</div>
</div>


		
		<div id="advts-block" style="width: 728px; margin: 0 auto 20px">
	<script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- EWAD-LB0 -->
	<ins class="adsbygoogle"
	     style="display:inline-block;width:728px;height:90px"
	     data-ad-client="ca-pub-0762366973631369"
	     data-ad-slot="9857477349"></ins>
	<script>
	(adsbygoogle = window.adsbygoogle || []).push({});
	</script>
</div>




	<div id="no-reply-81" class="bbp-no-reply">
		<div class="bbp-template-notice">
			<p>You must be logged in to reply to this topic.</p>
		</div>
	</div>



	
	
</div>
			</div>
		
	
				<div id="footer">
			Copyright &copy; 2015 <a rel="author" href="https://plus.google.com/103752924219473791252" target="_blank" title="Google +">Hage Yaapa</a>
			<div id="twitter"><a href="https://twitter.com/hacksparrow">@hacksparrow <img src="wp-content/themes/ewad/twitter.png" /></a></div>
			</div>

			<script type='text/javascript' src='wp-content/plugins/bbpress/templates/default/js/editor.js%3Fver=2.5.4-5380'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var bbpTopicJS = {"bbp_ajaxurl":"http:\/\/expressjs-book.com\/forums\/topic\/domain-handler-on-error-handler\/?bbp-ajax=true","generic_ajax_error":"Something went wrong. Refresh your browser and try again.","is_user_logged_in":"","fav_nonce":"9631ddcdf0","subs_nonce":"6452d22779"};
/* ]]> */
</script>
<script type='text/javascript' src='wp-content/plugins/bbpress/templates/default/js/topic.js%3Fver=2.5.4-5380'></script>
		</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-42449377-1', 'expressjs-book.com');
  ga('send', 'pageview');

</script>

	</body>
</html>